#!/usr/bin/env ruby

$:.unshift File.dirname(__FILE__)
$:.unshift File.join(File.dirname(__FILE__), "../lib")

require "optparse"
require "ostruct"
require "yaml"
require "yaml-cv"

class Options

    def self.initialize

        @@options = OpenStruct.new
        @@options.file_name = ""
    end

    def self.parser

        OptionParser.new do |opts|

            opts.banner = "Usage: yaml-cv <path to yml file> [options]"

            opts.on_tail("-h", "--help", "Print this message and exit.") do

                puts opts
                exit
            end

        end

    end

    def self.parse(args)

        initialize

        parser.parse!(args)

        @@options.file_name = ARGV.pop

        raise "Please specify an input yml file." unless @@options.file_name
    end

    def self.options

        @@options
    end

end

Options.parse(ARGV)

cv = CV.new Options.options.file_name


puts cv.render